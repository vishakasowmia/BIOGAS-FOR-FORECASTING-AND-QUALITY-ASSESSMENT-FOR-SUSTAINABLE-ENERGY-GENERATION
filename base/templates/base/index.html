{% extends 'base/main.html' %}
{% block content %}
<!-- index.html -->
<div class="header-bar">
    <h1> Waste-Dashboard</h1>
    <a href="{% url 'dashboard' %}">Go to Upload Page</a>
    </div>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- Hyperlink to the upload page -->
   


    <!-- Include Highcharts -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    
    <style>
        /* Move the container styles to the style block */
        .chart-container {
            width: 45%;
            float: left;
            margin: 10px;
            border: 0.5px solid #131212;
        }

        .chart-container-2 {
            width: 45%;
            float: left;
            margin: 10px;
            border: 0.5px solid #131212;
        }
        .chart-container-3 {
            width: 100%;
            float: left;
            margin: 10px;
            border: 0.5px solid #131212;
        }
        .chart-container-4 {
            width: 100%;
            float: left;
            margin: 10px;
            border: 0.5px solid #131212;
        }
    </style>

   

    <div id="container1" class="chart-container"></div>
    <div id="container2" class="chart-container-2"></div>
    <div id="container3" class="chart-container-3"></div>
    <div id="container4" class="chart-container-4"></div>

    <!-- Highcharts configuration for the first chart -->
    <script>
        _categories = {{categories|safe}};
        _values = {{values|safe}};

        document.addEventListener('DOMContentLoaded', function () {
            const chart = Highcharts.chart('container1', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Total sum of waste collected',
                    align: 'left'
                    
                },
                subtitle: {
                 text: 'Source: <a href="https://www.ssb.no/transport-og-reiseliv/landtransport/statistikk/innenlandsk-transport">Parivarthana</a>',
                 align: 'left'
    },
      

                legend: {
                    align: 'right',
                    verticalAlign: 'middle',
                    layout: 'vertical'
                },
                xAxis: {
                    categories: _categories,
                    title: {
                        text: 'Collected wastes'
                    },
                    gridLineWidth: 1,
                    lineWidth: 0
                },
                yAxis: {
                    allowDecimals: false,
                    title: {
                        text: 'Sum of wastes generated'
                    }
                },
                series: [{
                    name: 'sum of wastes generated',
                    data: _values
                }],
                responsive: {
                    rules: [{
                        condition: {
                            maxWidth: 500
                        },
                        chartOptions: {
                            legend: {
                                align: 'center',
                                verticalAlign: 'bottom',
                                layout: 'horizontal'
                            },
                            yAxis: {
                                labels: {
                                    align: 'left',
                                    x: 0,
                                    y: -5
                                },
                                title: {
                                    text: null
                                }
                            },
                            subtitle: {
                                text: null
                            },
                            credits: {
                                enabled: false
                            }
                        }
                    }]
                }
            });

            document.getElementById('small').addEventListener('click', function () {
                chart.setSize(400, 300); // Adjust width and height as needed
            });
        });
    </script>

    <!-- Highcharts configuration for the line chart -->
    <script>
_line_categories = {{ line_categories | safe }};
_line_values_1 = {{ line_values_1 | safe }};
_line_values_2 ={{line_values_2 | safe}};
_line_values_3 = {{ line_values_3 | safe }};
_line_values_4 = {{ line_values_4 | safe }};
_line_values_5 = {{ line_values_5 | safe }};
_line_values_6 = {{ line_values_6 | safe }};
_line_values_7 = {{ line_values_7 | safe }};
_line_values_8 = {{ line_values_8 | safe }};
_line_values_9 = {{ line_values_9 | safe }};

document.addEventListener('DOMContentLoaded', function () {
    Highcharts.chart('container3', {
        chart: {
            type: 'line'
        },
        title: {
            text: 'Monthly Waste Sales',
            align: 'left'
        },
        subtitle: {
            text: 'Waste collection trends for each month',
        },
        subtitle: {
        text: 'Source: <a href="https://www.ssb.no/transport-og-reiseliv/landtransport/statistikk/innenlandsk-transport">Parivarthana</a>',
        align: 'left'
    },
        xAxis: {
            categories: _line_categories,
            title: {
                text: 'Month'
            }
        },
        yAxis: {
            title: {
                text: 'Waste Sold'
            }
        },
        series: [{
            name: 'White Paper Sales',
            data: _line_values_1.map(Number)
        }, {
            name: 'aluminium sale',
            data: _line_values_2.map(Number)
        },
        {
            name: 'Color Paper Sales',
            data: _line_values_3.map(Number)
        }, {
            name: 'Cbox Paper Sales',
            data: _line_values_4.map(Number)
        }, {
            name: 'damage Sales',
            data: _line_values_5.map(Number)
        }, {
            name: 'milk pouches Sales',
            data: _line_values_6.map(Number)
        }, {
            name: 'magazine Sales',
            data: _line_values_7.map(Number)
        }, {
            name: 'plastic Sales',
            data: _line_values_8.map(Number)
        }, {
            name: 'road waste Sales',
            data: _line_values_9.map(Number)
        }],
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        }
    });
});
</script>

    <!-- Highcharts configuration for the bar chart -->
    <script>
    _bar_categories = {{ bar_categories | safe }};
    _bar_values_1 = {{ bar_values_1 | safe }};
    _bar_values_2 = {{ bar_values_2 | safe }};
    _bar_values_3 = {{ bar_values_3 | safe }};
    _bar_values_4 = {{ bar_values_4 | safe }};
    _bar_values_5 = {{ bar_values_5 | safe }};
    _bar_values_6 = {{ bar_values_6 | safe }};
    _bar_values_7 = {{ bar_values_7 | safe }};
    _bar_values_8 = {{ bar_values_8 | safe }};
    _bar_values_9 = {{ bar_values_9 | safe }};
    _bar_values_10 = {{ bar_values_10 | safe }};
    _bar_values_11 = {{ bar_values_11 | safe }};
    _bar_values_12 = {{ bar_values_12 | safe }};
    
document.addEventListener('DOMContentLoaded', function () {
Highcharts.chart('container4', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'Different Waste collected in different Events',
        align: 'left'
    },
    subtitle: {
        text: 'Source: <a href="https://www.ssb.no/transport-og-reiseliv/landtransport/statistikk/innenlandsk-transport">Parivarthana</a>',
        align: 'left'
    },
    xAxis: {
        categories:  _bar_categories
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Percent'
        }
    },
    tooltip: {
        pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',
        shared: true
    },
    plotOptions: {
        column: {
            stacking: 'percent',
            dataLabels: {
                enabled: true,
                format: '{point.percentage:.0f}%'
            }
        }
    },
    series: [{
                name: 'White Paper Collected',
                data: _bar_values_1.map(Number)
            }, {
                name: 'aluminium collected',
                data: _bar_values_2.map(Number)
            }, {
                name: 'Color Paper Collected',
                data: _bar_values_3.map(Number)
            }, {
                name: 'Cbox Paper Collected',
                data: _bar_values_4.map(Number)
            }, {
                name: 'damage collected',
                data: _bar_values_5.map(Number)
            }, {
                name: 'milk pouches collected',
                data: _bar_values_6.map(Number)
            }, {
                name: 'magazine collected',
                data: _bar_values_7.map(Number)
            }, {
                name: 'plastic collected',
                data: _bar_values_8.map(Number)
            }, {
                name: 'road waste collected',
                data: _bar_values_9.map(Number)
            }, {
                name: 'compost collected',
                data: _bar_values_10.map(Number)
            }, {
                name: 'wet-waste collected',
                data: _bar_values_11.map(Number)
            }, {
                name: 'biogas generated',
                data: _bar_values_12.map(Number)
            }],
        })
});
</script>

    <!-- Highcharts configuration for the pie chart -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            Highcharts.chart('container2', {
                chart: {
                    plotBackgroundColor: null,
                    plotBorderWidth: 0,
                    plotShadow: false
                },
                title: {
                    text: 'Total Sale by Event',
                    align: 'center',
                    verticalAlign: 'middle',
                    y: 60
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                accessibility: {
                    point: {
                        valueSuffix: '%'
                    }
                },
                subtitle: {
                text: 'Source: <a href="https://www.ssb.no/transport-og-reiseliv/landtransport/statistikk/innenlandsk-transport">Parivarthana</a>',
                align: 'left'
                },
                plotOptions: {
                    pie: {
                        dataLabels: {
                            enabled: true,
                            distance: -50,
                            style: {
                                fontWeight: 'bold',
                                color: 'white'
                            }
                        },
                        startAngle: -90,
                        endAngle: 90,
                        center: ['50%', '75%'],
                        size: '110%'
                    }
                },
                series: [{
                    type: 'pie',
                    name: 'Total Sale',
                    innerSize: '50%',
                    data: [
                        ['Blossoms', 1.000000],
                        ['CBCS_inauguration', 1.000000],
                        ['Canvocation', 1.000000],
                        ['End_Trimester', 6.271119],
                        ['Endsem', 12.651560],
                        ['Exams', 4.348042],
                        ['FIP', 1.000000],
                        ['Holiday', 6.271119],
                        ['Holy_week', 5.505864],
                        ['In-Bloom', 1.000000],
                        ['Last_Instruction_Day', 1.000000],
                        ['MBA_fest', 1.397535],
                        ['Mid_Trimester', 3.736832],
                        ['Mid_sem', 10.415424],
                        ['Normal', 35.786325],
                        ['Nritta', 1.213675],
                        ['Reopening', 1.000000],
                        ['Republic_Day', 1.000000],
                        ['Sound_Curry', 1.000000],
                        ['Supplementary', 4.184059]
                    ]
                }]
            });
        });
    </script>

    <!-- Include Bootstrap and jQuery scripts -->

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR" crossorigin="anonymous"></script>
{% endblock %}
